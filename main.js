!function(){"use strict";document.querySelectorAll(".popup"),document.querySelector(".popup__form");const e=document.querySelector(".elements"),t=(document.querySelector("#card-template").content.querySelector(".element"),document.querySelector(".profile__edit-button")),s=document.querySelector(".profile__add-button"),n=document.querySelector(".popup_type_edit-profile"),o=n.querySelector(".popup__input_type_name"),i=n.querySelector(".popup__input_type_description"),r=document.querySelector(".popup_type_add-card"),a=document.querySelector(".popup_type-preview"),l=(a.querySelector(".popup__image"),a.querySelector(".popup__subtitle"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});function c(e){if("Escape"===e.key){const e=document.querySelector(".popup__opened");e&&(e.classList.remove("popup__opened"),window.removeEventListener("keydown",c))}}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class u{constructor(e,t,s){p(this,"_activateLikeButton",(e=>e.target.classList.toggle("element__button-like_active"))),p(this,"_handleDeletButton",(()=>{this._card.remove(),this._card=null})),p(this,"_openImagePreview",(()=>{popupImage.src=this._link,popupImage.alt=this._text,popupTitle.textContent=this._text,popupImagePreview.classList.add("popup__opened"),window.addEventListener("keydown",c)})),p(this,"_setEventListeners",(()=>{this._likeButton.addEventListener("click",this._activateLikeButton),this._deleteButton.addEventListener("click",this._handleDeletButton),this._cardImage.addEventListener("click",(()=>this._handleCardClick(this._text,this._link)))})),p(this,"getCardElement",(()=>(this._card=this._cardTemplate.cloneNode(!0),this._likeButton=this._card.querySelector(".element__button-like"),this._deleteButton=this._card.querySelector(".element__button-delete"),this._cardImage=this._card.querySelector(".element__image"),this._card.querySelector(".element__title").textContent=this._text,this._cardImage.src=this._link,this._cardImage.alt=this._text,this._setEventListeners(),this._card))),this._text=e.name,this._link=e.link,this._templateCardSelector=t,this._handleCardClick=s,this._cardTemplate=document.querySelector(t).content.querySelector(".element")}}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var _=class{constructor(e,t){d(this,"_showInputError",(e=>{const{inputErrorClass:t,errorClass:s}=this._settings,n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(t),n.textContent=e.validationMessage,n.classList.add(s)})),d(this,"_hideInputError",(e=>{const{inputErrorClass:t,errorClass:s}=this._settings,n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(t),n.textContent="",n.classList.remove(s)})),d(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,this._settings)})),d(this,"_hasInvalidInput",(()=>this._inputList.every((e=>e.validity.valid)))),d(this,"toggleButtonState",(()=>{this._hasInvalidInput()?this._enableButton():this.disableButton()})),d(this,"_setEventListeners",(()=>{const{inputSelector:e}=this._settings;this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))})),this._settings=e,this._formElement=t,this._inputList=[...this._formElement.querySelectorAll(this._settings.inputSelector)],this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}disableButton(){const{inactiveButtonClass:e}=this._settings;this._buttonElement.disabled=!0,this._buttonElement.classList.add(e)}_enableButton(){const{inactiveButtonClass:e}=this._settings;this._buttonElement.disabled=!1,this._buttonElement.classList.remove(e)}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class h{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popup.classList.add("popup__opened"),this.addKeyDownListener()}addKeyDownListener(){window.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup__opened"),this.removeKeyDownListener()}removeKeyDownListener(){window.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.matches(".popup")||e.target.matches(".popup__close"))&&this.close()}))}}class m extends h{constructor(e,t){super(e),this._handlerSubmit=t,this._form=this._popup.querySelector(".popup__form")}_getInputValues(){const e={};return[...this._form.querySelectorAll(".popup__input")].forEach((t=>{const s=t.name,n=t.value;e[s]=n})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handlerSubmit(this._getInputValues())}))}close(){super.close(),this._form.reset()}}new class{constructor(e){this.baseUrl=e.baseUrl,this.headers=e.headers}getsernfo(){return fetch(this.baseUrl+"/users/me",{headers:this.headers}).then((e=>e.ok?e.json():Promise.reject("err!!!"))).catch()}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"4cdae314-7e8a-4bed-8ada-70ad33c12e13","Content-Type":"application/json"}}).getUserInfo().than((e=>{console.log("res =>",e)}));const y=new _(l,n),v=new _(l,r);y.enableValidation(),v.enableValidation();const b=new m(".popup_type_add-card",(t=>{S({name:t["card-title"],link:t["card-link"]},e),b.close(),v.disableButton()}));b.setEventListeners();const E=new m(".popup_type_edit-profile",(e=>{f.setUserInfo(e.Name,e.description),E.close()}));E.setEventListeners();const g=new class extends h{open(e,t){super.open();const s=this._popup.querySelector(".popup__subtitle"),n=this._popup.querySelector(".popup__image");s.textContent=e,n.src=t,n.alt=" image of ".concat(e)}}(".popup_type-preview");g.setEventListeners();const S=(e,t)=>{const s=new u(e,"#card-template",((e,t)=>{g.open(e,t)}));L.addItem(s.getCardElement())},L=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:S},".elements");L.renderItems();const f=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._userName=document.querySelector(t),this._userDescription=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,description:this._userDescription.textContent}}setUserInfo(e,t){this._userName.textContent=e,this._userDescription.textContent=t}}({nameSelector:".profile__title",jobSelector:".profile__description"});t.addEventListener("click",(function(){!function(){const e=f.getUserInfo();o.value=e.name,i.value=e.description}(),E.open()})),s.addEventListener("click",(function(){v.disableButton(),b.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjdUYsSUhxRGQsQ0FDMUJrQixhQUFjLGtCQUNkQyxZQUFhLDBCQTRCakJoSixFQUFrQndDLGlCQUFpQixTQWxCbkMsWUFOQSxXQUNJLE1BQU0yRyxFQUFjekIsRUFBU1YsY0FDN0I1RyxFQUFlNEYsTUFBUW1ELEVBQVlqRyxLQUNuQzdDLEVBQXNCMkYsTUFBUW1ELEVBQVl0QixZQUkxQ3VCLEdBQ0EzQixFQUFpQnZDLFVBa0JyQmhGLEVBQWlCc0MsaUJBQWlCLFNBZmxDLFdBQ0k4RSxFQUFxQmxELGdCQUNyQm1ELEVBQWFyQyxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XHJcbmV4cG9ydCBjb25zdCBmb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgZWxlbWVudExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcclxuICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKTtcclxuXHJcbi8vcHJvZmlsZSBtb2RlbCBidXR0b25zXHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRCdXR0b25Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLy9wb3B1cCBlZGl0IHByb2ZpbGVcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCIpO1xyXG5cclxuLy9wb3B1cCBlZGl0IHByb2ZpbGUgaW5wdXRzXHJcbmV4cG9ydCBjb25zdCBwb3B1cElucHV0TmFtZSA9IHBvcHVwRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcclxuICAgIFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbnB1dERlc2NyaXB0aW9uID0gcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5cclxuLy9wb3B1cCBhZGQgY2FyZFxyXG5leHBvcnQgY29uc3QgcG9wdXBBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIpO1xyXG5cclxuLy9pbWFnZSBwcmV2aWV3XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZS1wcmV2aWV3XCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IHBvcHVwSW1hZ2VQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBUaXRsZSA9IHBvcHVwSW1hZ2VQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1YnRpdGxlXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3NhdmVcIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3NhdmVfZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59IiwiZXhwb3J0IGZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cFdpbmRvdykge1xyXG4gICAgcG9wdXBXaW5kb3cuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICBhZGRLZXlEb3duTGlzdGVuZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkS2V5RG93bkxpc3RlbmVyKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleURvd24pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgY29uc3Qgb3BlbmVkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgIG9wZW5lZFBvcHVwICYmIGNsb3NlUG9wdXAob3BlbmVkUG9wdXApXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZVBvcHVwKHBvcHVwV2luZG93KSB7XHJcbiAgICBwb3B1cFdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX29wZW5lZFwiKTtcclxuICAgIHJlbW92ZUtleURvd25MaXN0ZW5lcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVLZXlEb3duTGlzdGVuZXIoKSB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5RG93bik7XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IG9wZW5Qb3B1cCB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiXHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZUNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7IC8ve3RleHQsbGlua31cclxuICAgICAgICB0aGlzLl90ZXh0ID0gZGF0YS5uYW1lOyBcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlQ2FyZFNlbGVjdG9yID0gdGVtcGxhdGVDYXJkU2VsZWN0b3JcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2tcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZUNhcmRTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9hY3RpdmF0ZUxpa2VCdXR0b24gPSBldnQgPT4gZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG5cclxuICAgIF9oYW5kbGVEZWxldEJ1dHRvbiA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NhcmQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfb3BlbkltYWdlUHJldmlldyA9ICgpID0+IHtcclxuICAgICAgICBwb3B1cEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgcG9wdXBJbWFnZS5hbHQgPSB0aGlzLl90ZXh0O1xyXG4gICAgICAgIHBvcHVwVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xyXG4gICAgICAgIG9wZW5Qb3B1cChwb3B1cEltYWdlUHJldmlldyk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9hY3RpdmF0ZUxpa2VCdXR0b24pO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRCdXR0b24pO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX3RleHQsIHRoaXMuX2xpbmspKTsvLyh0aGlzLmRhdGEpXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZEVsZW1lbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2FyZCA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWxpa2VcIik7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2J1dHRvbi1kZWxldGVcIik7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xyXG4gICAgICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKTtcclxuXHJcbiAgICAgICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fdGV4dDtcclxuICAgICAgXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3NcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcildO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3N9ID0gdGhpcy5fc2V0dGluZ3M7XHJcblxyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICAgIH07XHJcbiAgICAgIFxyXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzfSA9IHRoaXMuX3NldHRpbmdzO1xyXG5cclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9yQ2xhc3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgdGhpcy5fc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHRoaXMuX2lucHV0TGlzdC5ldmVyeShpbnB1dEVsZW1lbnQgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuXHJcbiAgICBcclxuICAgIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICAgICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgfVxyXG5cclxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICAgICAgICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBpbnB1dFNlbGVjdG9yIH0gPSB0aGlzLl9zZXR0aW5nc1xyXG4gICAgICAgIC8vY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIFxyXG4gICAgICBcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vdG9nZ2xlIHN1Ym1pdFxyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTsgLy9jaGVjayB2YWxpZGl0eVxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vdG9nZ2xlIHN1Ym1pdFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgICBcclxuICAgIC8vIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIC8vICAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgIC8vICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpXHJcbiAgICAvLyAgICAgfSlcclxuICAgIC8vIH1cclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgIH07XHJcbiAgICBcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3IiLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKVxyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX29wZW5lZFwiKTtcclxuICAgICAgICB0aGlzLmFkZEtleURvd25MaXN0ZW5lcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEtleURvd25MaXN0ZW5lcigpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3BlbmVkXCIpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlS2V5RG93bkxpc3RlbmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlS2V5RG93bkxpc3RlbmVyKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldnQudGFyZ2V0Lm1hdGNoZXMoXCIucG9wdXBcIikgfHwgZXZ0LnRhcmdldC5tYXRjaGVzKFwiLnBvcHVwX19jbG9zZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICBcclxuICAgIH1cclxuICAgXHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwe1xyXG4gICAgY29uc3RydWN0b3IocG91cFNlbGVjdG9yLCBoYW5kbGVyU3VibWl0KSB7XHJcbiAgICAgICAgc3VwZXIocG91cFNlbGVjdG9yKVxyXG5cclxuICAgICAgICB0aGlzLl9oYW5kbGVyU3VibWl0ID0gaGFuZGxlclN1Ym1pdFxyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpXHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHt9XHJcblxyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpXVxyXG5cclxuICAgICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gaW5wdXQubmFtZVxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGlucHV0LnZhbHVlXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIHZhbHVlc1trZXldID0gdmFsdWVcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsdWVzXHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlclN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKVxyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKVxyXG4gICAgfVxyXG59IiwiY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgdGhpcy5iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsXHJcbiAgICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVyc1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0c2VybmZvKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyBcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoXCJlcnIhISFcIikpXHJcbiAgICAgICAgLmNhdGNoKClcclxuICAgICAgICAgXHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyAgIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIC8vICAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTQyL2NhcmRzXCIsIHtcclxuICAgIC8vICAgICAgIGhlYWRlcnM6IHtcclxuICAgIC8vICAgICAgICAgYXV0aG9yaXphdGlvbjogXCJjNTZlMzBkYy0yODgzLTQyNzAtYTU5ZS1iMmY3YmFlOTY5YzZcIlxyXG4gICAgLy8gICAgICAgfVxyXG4gICAgLy8gICAgIH0pXHJcbiAgICAvLyAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgLy8gICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAvLyAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICAgIH0pO1xyXG4gICAgLy8gICB9IFxyXG4gIFxyXG4gICAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcclxuICB9XHJcbiAgXHJcbiAgZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0zLWVuXCIsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGF1dGhvcml6YXRpb246IFwiNGNkYWUzMTQtN2U4YS00YmVkLThhZGEtNzBhZDMzYzEyZTEzXCIsXHJcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICB9XHJcbiAgfSk7IiwiaW1wb3J0IFwiLi8uLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBcIi4vLi4vZm9udHMvZm9udC5jc3NcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgZWxlbWVudExpc3QsIGVkaXRCdXR0b25Qcm9maWxlLCBhZGRCdXR0b25Qcm9maWxlLCBwb3B1cEVkaXRQcm9maWxlLCBwb3B1cElucHV0TmFtZSwgcG9wdXBJbnB1dERlc2NyaXB0aW9uLCBwb3B1cEFkZENhcmQsIHNldHRpbmdzfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IENhcmR9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIlxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIlxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCJcblxuaW1wb3J0IHsgYXBpLCBBcGl9IGZyb20gXCIuLi91dGlscy9BcGkuanNcIlxuXG5cbmFwaS5nZXRVc2VySW5mbygpXG4gICAgLnRoYW4ocmVzID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXMgPT5cIiwgcmVzKVxuICAgIH0pXG5cblxuXG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHBvcHVwRWRpdFByb2ZpbGUpXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwb3B1cEFkZENhcmQpXG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgaGFuZGxlQWRkQ2FyZFN1Ym1pdCA9IChkYXRhKSA9PiB7ICAgXG4gICAgcmVuZGVyQ2FyZCggXG4gICAgICB7XG4gICAgICAgIG5hbWU6IGRhdGFbXCJjYXJkLXRpdGxlXCJdLFxuICAgICAgICBsaW5rOiBkYXRhW1wiY2FyZC1saW5rXCJdLFxuICAgICAgfSwgICAgXG4gICAgICAgIGVsZW1lbnRMaXN0XG4gICAgKTtcbiAgICAgICAgXG4gICAgYWRkQ2FyZFBvcHVwLmNsb3NlKClcbiAgICBhZGRDYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKClcbn1cblxuY29uc3QgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQgPSAoZGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEuTmFtZSwgZGF0YS5kZXNjcmlwdGlvbilcbiAgICBcbiAgICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKClcbiAgICAvL2FkZENhcmRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKVxufVxuXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGVcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKClcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlLXByZXZpZXdcIilcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5jb25zdCB0ZW1wbGF0ZUNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIlxuXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmREYXRhLCBlbGVtZW50TGlzdCkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgdGVtcGxhdGVDYXJkU2VsZWN0b3IsIChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICAgIGltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKVxuICAgIH0pICAgIFxuICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkLmdldENhcmRFbGVtZW50KCkpO1xufVxuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oeyBpdGVtczogaW5pdGlhbENhcmRzLCByZW5kZXJlcjogcmVuZGVyQ2FyZCB9LCBcIi5lbGVtZW50c1wiKVxuXG5zZWN0aW9uLnJlbmRlckl0ZW1zKClcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICAgIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIiwgXG4gICAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KVxuXG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgICBjb25zdCBwcm9maWxlRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcbiAgICBwb3B1cElucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVEYXRhLm5hbWU7XG4gICAgcG9wdXBJbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gcHJvZmlsZURhdGEuZGVzY3JpcHRpb247XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRCdXR0b25DbGljaygpIHtcbiAgICBmaWxsUHJvZmlsZUZvcm0oKTtcbiAgICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKVxufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRCdXR0b25DbGljaygpIHtcbiAgICBhZGRDYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKClcbiAgICBhZGRDYXJkUG9wdXAub3BlbigpXG4gICAgXG59XG5cbi8vIGNvbnN0IGFsbENsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Nsb3NlXCIpO1xuXG4vLyBhbGxDbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4vLyAgIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoJy5wb3B1cCcpO1xuLy8gICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZVBvcHVwKHBvcHVwKSk7XG4vLyB9KTtcblxuZWRpdEJ1dHRvblByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUVkaXRCdXR0b25DbGljayk7XG5cbmFkZEJ1dHRvblByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUFkZEJ1dHRvbkNsaWNrKTsiLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICAvLyBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAvLyAgICAgc3VwZXIocG9wdXBTZWxlY3RvcilcclxuXHJcbiAgICAvLyB9XHJcblxyXG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpXHJcblxyXG4gICAgICAgIGNvbnN0IGNhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJ0aXRsZVwiKVxyXG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIilcclxuICAgICAgICBcclxuICAgICAgICBjYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZVxyXG4gICAgICAgIGltYWdlLnNyYyA9IGxpbmtcclxuICAgICAgICBpbWFnZS5hbHQgPSAoYCBpbWFnZSBvZiAke25hbWV9YClcclxuICAgICAgICBcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zXHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlclxyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihkYXRhKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoIHtuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yfSkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpXHJcbiAgICAgICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3RvcilcclxuICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl91c2VyRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudExpc3QiLCJlZGl0QnV0dG9uUHJvZmlsZSIsImNvbnRlbnQiLCJhZGRCdXR0b25Qcm9maWxlIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwSW5wdXROYW1lIiwicG9wdXBJbnB1dERlc2NyaXB0aW9uIiwicG9wdXBBZGRDYXJkIiwicG9wdXBJbWFnZVByZXZpZXciLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGFuZGxlS2V5RG93biIsImV2dCIsImtleSIsIm9wZW5lZFBvcHVwIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwid2luZG93IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJ0ZW1wbGF0ZUNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRhcmdldCIsInRvZ2dsZSIsInRoaXMiLCJfY2FyZCIsInBvcHVwSW1hZ2UiLCJzcmMiLCJfbGluayIsImFsdCIsIl90ZXh0IiwicG9wdXBUaXRsZSIsInRleHRDb250ZW50IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlQnV0dG9uIiwiX2FjdGl2YXRlTGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfaGFuZGxlRGVsZXRCdXR0b24iLCJfY2FyZEltYWdlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkVGVtcGxhdGUiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJuYW1lIiwibGluayIsIl90ZW1wbGF0ZUNhcmRTZWxlY3RvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiX3NldHRpbmdzIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJfaGFzSW52YWxpZElucHV0IiwiX2VuYWJsZUJ1dHRvbiIsImRpc2FibGVCdXR0b24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJjbG9zZSIsIm9wZW4iLCJhZGRLZXlEb3duTGlzdGVuZXIiLCJyZW1vdmVLZXlEb3duTGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsIm1hdGNoZXMiLCJQb3B1cFdpdGhGb3JtIiwicG91cFNlbGVjdG9yIiwiaGFuZGxlclN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZXJTdWJtaXQiLCJfZm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJlIiwicmVzZXQiLCJvcHRpb25zIiwiYmFzZVVybCIsImhlYWRlcnMiLCJnZXRzZXJuZm8iLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiY2F0Y2giLCJhdXRob3JpemF0aW9uIiwiZ2V0VXNlckluZm8iLCJ0aGFuIiwiY29uc29sZSIsImxvZyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZFBvcHVwIiwicmVuZGVyQ2FyZCIsImVkaXRQcm9maWxlUG9wdXAiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiTmFtZSIsImRlc2NyaXB0aW9uIiwiaW1hZ2VQb3B1cCIsImNhcHRpb24iLCJpbWFnZSIsImNhcmREYXRhIiwiY2FyZCIsInNlY3Rpb24iLCJhZGRJdGVtIiwiZ2V0Q2FyZEVsZW1lbnQiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJlbGVtZW50IiwicHJlcGVuZCIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX3VzZXJOYW1lIiwiX3VzZXJEZXNjcmlwdGlvbiIsInByb2ZpbGVEYXRhIiwiZmlsbFByb2ZpbGVGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==